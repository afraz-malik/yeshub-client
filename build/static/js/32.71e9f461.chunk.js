(this.webpackJsonpyeshub=this.webpackJsonpyeshub||[]).push([[32],{358:function(e,t,n){"use strict";var i=n(2),a=n(0),o=null;t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Object(a.useState)(e),n=Object(i.a)(t,2),c=n[0],s=n[1],l=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&null===o&&(o=setTimeout((function(){s((function(e){return e+1})),o=null}),2e3))};return Object(a.useEffect)((function(){return document.addEventListener("scroll",l),function(){return document.removeEventListener("scroll",l)}}),[c]),{page:c}}},530:function(e,t,n){"use strict";n.r(t),n.d(t,"NOTIFICATION_RECEIVED_EVENT_DISPATCH",(function(){return k}));var i=n(21),a=n(2),o=n(0),c=n.n(o),s=n(114),l=n(4),d=n(115),r=n(82),m=n(6),u=n(37),f=function(e,t){return e.replace("{{id}}",t||"")},p=n(3),v={fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return p.a.get("Notification/get?page="+e)},actionPerformed:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p.a.put("Notification/read?ID=".concat(e),{actionPerformed:t})},read:function(e){return p.a.put("Notification/read?ID=".concat(e))}},E={isAward:{heading:"Award Received",type:"award",link:"/profile/settings/"},isNewPost:{heading:"New Post",type:"post",id:"post",link:"/post/details/{{id}}"},isPostLiked:{heading:"Post Liked",type:"post",id:"post",link:"/post/details/{{id}}"},isPostDisLiked:{heading:"Post Disliked",id:"post",type:"post",link:"/post/details/{{id}}"},isInvitation:{heading:"Invitation",type:"community",id:"community",link:"/"},isInvitationResponse:{heading:"Invitation Response",type:"community",id:"community",link:"/"},isNewJoined:{heading:"New Joined",type:"community",id:"community",link:"/community/details/{{id}}"},isJoinedPending:{heading:"Joined Pending",type:"community",id:"community",link:"/community/details/{{id}}"},isJoiningResponse:{heading:"Joining Response",type:"community",id:"community",link:"/community/details/{{id}}"},isPostComment:{heading:"Post Comment",id:"post",type:"post",link:"/post/details/{{id}}"},"Event Invitation":{heading:"Event Invitation",type:"event",id:"event",link:"/event/details/{{id}}"},isPostApproved:{heading:"Post Approved",type:"post",id:"post",link:"/post/details/{{id}}"},AwardReceived:{heading:"Award Received",type:"award",link:"/profile/stats/"}},g=function(e){var t,n,i=e.notification,c=o.useState(!!i.actionPerformed),s=Object(a.a)(c,2),p=s[0],g=s[1];return o.createElement(o.Fragment,null,o.createElement("div",{className:"profile-container notification--item ".concat(i.isRead?"done":"")},o.createElement("div",{className:"pb-1 d-flex flex-lg-row flex-column justify-content-between mb-2"},o.createElement("div",{className:"d-flex flex-lg-row flex-column"},o.createElement("div",null,o.createElement("span",{className:"comment-image"},o.createElement("img",{src:m.c,width:"20",alt:"comment"})),o.createElement("span",{className:"post-in ml-1"},(null===(t=E[i.notificationType])||void 0===t?void 0:t.heading)||""))),o.createElement("div",null,o.createElement("span",{className:"post-in"},Object(d.a)(i.updatedAt)))),o.createElement(l.b,{to:f((null===(n=E[i.notificationType])||void 0===n?void 0:n.link)||"",function(){var e,t;switch(i.notificationType){case"isPostComment":case"isNewPost":case"isPostLiked":case"isPostDisLiked":case"isPostApproved":return(null===(e=i.post)||void 0===e?void 0:e._id)||"";case"isInvitation":case"isInvitationResponse":case"isNewJoined":case"isJoinedPending":case"isJoiningResponse":return(null===(t=i.community)||void 0===t?void 0:t._id)||"";case"Event Invitation":return i.event||"";default:return""}}())},i.person&&i.community?o.createElement("div",{className:"pb-1 d-flex"},o.createElement("span",{className:"text-prime"},null===i||void 0===i?void 0:i.person.userName),o.createElement("span",{className:"post-in ml-1"},"in"),o.createElement("span",{className:"text-prime ml-1"},null===i||void 0===i?void 0:i.community.name)):null,o.createElement("p",{className:"post-in mb-0 font-weight-bold"},i.message)),"isInvitation"!==i.notificationType||p?null:o.createElement("div",{className:"d-flex justify-content-end"},o.createElement("button",{className:"btn btn-sm btn-success mr-2",onClick:function(){var e,t,n;return t=(null===(e=i.community)||void 0===e?void 0:e._id)||"",n=i._id,void r.a.acceptCommunity(t).then((function(){v.actionPerformed(n,!0),g(!0)}))}},o.createElement("i",{className:"fa mr-0 fa-check text-white"})),o.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){var e,t,n;return t=(null===(e=i.community)||void 0===e?void 0:e._id)||"",n=i._id,void r.a.rejectCommunity(t).then((function(){v.actionPerformed(n,!0),g(!0)}))}},o.createElement("i",{className:"fa mr-0 fa-times text-white"}))),"Event Invitation"!==i.notificationType||p?null:o.createElement("div",{className:"d-flex justify-content-end"},o.createElement("button",{className:"btn btn-sm btn-success mr-2",onClick:function(){u.a.acceptModRequest(i.event).then((function(){v.actionPerformed(i.event||""),g(!0)}))}},o.createElement("i",{className:"fa mr-0 fa-check text-white"})),o.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){u.a.rejectModRequest(i.event).then((function(){v.actionPerformed(i.event||""),g(!0)}))}},o.createElement("i",{className:"fa mr-0 fa-times text-white"})))),o.createElement("hr",null))},y=function(e){var t=e.notifications,n=void 0===t?[]:t;return c.a.createElement(c.a.Fragment,null,n.map((function(e){return c.a.createElement(g,{key:e._id,notification:e})})))},b=function(e){var t=e.notifications;e.loading;return c.a.createElement("div",{className:"mc-border mt-3"},c.a.createElement("div",{className:"notification-description"},c.a.createElement(y,{notifications:t})))},h=function(){return c.a.createElement("div",{className:"cp-header"},c.a.createElement("div",{className:"d-flex flex-lg-row flex-column justify-content-between align-items-lg-center"},c.a.createElement("span",{className:"head"},"Notifications")))},N=n(8),w=n(358),k=new CustomEvent(N.g);t.default=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],l=t[1],d=Object(o.useState)(!0),r=Object(a.a)(d,2),m=r[0],u=r[1],f=Object(w.a)().page,p=Object(o.useState)(!0),E=Object(a.a)(p,2),g=E[0],y=E[1];return Object(o.useEffect)((function(){v.fetch(f).then((function(e){l([].concat(Object(i.a)(n),Object(i.a)(e.data.data.docs)));var t=e.data.data.docs.every((function(e){return e.isRead}));y(!1),u(t)}))}),[f]),Object(o.useEffect)((function(){m||document.dispatchEvent(k)}),[m]),c.a.createElement(s.a,null,c.a.createElement(h,null),c.a.createElement(b,{notifications:n,loading:g}))}}}]);
//# sourceMappingURL=32.71e9f461.chunk.js.map