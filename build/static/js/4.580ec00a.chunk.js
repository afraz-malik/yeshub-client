(this.webpackJsonpyeshub=this.webpackJsonpyeshub||[]).push([[4],{377:function(e,n,t){"use strict";var a=t(5),i=t(2),c=t(0),o=t(82),s=t(8),m=t(59);n.a=function(e){var n=e.communityId,t=e.isJoined,r=e.isPending,u=e.name,d=c.useState({isJoined:t,isPending:r}),l=Object(i.a)(d,2),f=l[0],b=l[1],v=function(e){document.dispatchEvent(new CustomEvent(s.a,{detail:Object(a.a)(Object(a.a)({},e),{},{community:n})}))};return c.useEffect((function(){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{isPending:r})}))}),[r]),c.useEffect((function(){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{isJoined:t})}))}),[t]),c.createElement("button",{type:"button",disabled:f.isPending,className:"btn btn-join",onClick:function(){f.isJoined?o.a.leaveCommunity(n).then((function(){var e={isJoined:!1,isPending:!1};v(e),b(e),m.a.event({category:"user",action:"leaved",label:u,nonInteraction:!1})})):f.isPending||o.a.joinCommunity(n).then((function(e){var n={isJoined:e.data.isJoined,isPending:e.data.isJoinPending};v(n),m.a.event({category:"user",action:"joined",label:u,nonInteraction:!1}),b(n)}))}},f.isJoined?"Leave Community":f.isPending?"Pending":"Join Community")}},503:function(e,n,t){"use strict";t.r(n);var a=t(5),i=t(2),c=t(0),o=t.n(c),s=t(82),m=t(4),r=t(6),u=t(377),d=t(12),l=function(e){var n=e.item;return o.a.createElement("div",{className:"card__layout"},o.a.createElement("div",{className:"community__header"},o.a.createElement(m.b,{to:{pathname:"/community/details/".concat(n._id),state:n}},o.a.createElement("div",{className:"community__header_left"},o.a.createElement("span",null,o.a.createElement("img",{src:n.logo?Object(d.a)(n.logo):r.p,alt:"PostedBy"})),o.a.createElement("span",{className:"title"},o.a.createElement("span",{id:"title_text"},n.name),o.a.createElement("p",{id:"members_row"},n.totalMembers," members")))),o.a.createElement("div",{className:"community__header_right"},o.a.createElement(u.a,{communityId:n._id,isJoined:n.isJoined||!1,isPending:n.isJoinPending||!1,name:n.name}))),o.a.createElement("div",{className:"community__body"},o.a.createElement("p",{className:"pt-2"},n.description)))},f=function(e){var n=e.communities,t=void 0===n?[]:n;return o.a.createElement("div",{className:"mc-mid pt-lg-0 pt-5"},t.map((function(e,n){return o.a.createElement(l,{key:n,item:e})})))},b=t(118),v=t(24),E=t(8);n.default=function(e){var n=e.singleView,t=Object(c.useState)([]),m=Object(i.a)(t,2),r=m[0],u=m[1];Object(c.useEffect)((function(){v.a&&s.a.fetchAll().then((function(e){u(e.data.data.docs)}))}),[v.a]);var d=function(e){var n=r.map((function(n){return e.detail.community===n._id?Object(a.a)(Object(a.a)({},n),{},{isJoined:e.detail.isJoined,isJoinPending:e.detail.isPending}):n}));u(n)};return Object(c.useEffect)((function(){return document.addEventListener(E.a,d),function(){return document.removeEventListener(E.a,d)}}),[d,r]),n?o.a.createElement(f,{communities:r}):o.a.createElement(b.a,null,o.a.createElement(f,{communities:r}))}}}]);
//# sourceMappingURL=4.580ec00a.chunk.js.map