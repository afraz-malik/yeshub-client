{"version":3,"sources":["Helpers/Request/Services/uploadFile/FileUpload.ts","Helpers/RegularExpressions/isUrl.ts","Shared/ImageUploader/index.tsx","Views/Inbox/index.tsx"],"names":["Post","uploadFile","data","axiosService","post","deleteFile","file","delete","isURL","url","REG_EXP_URL","test","style","width","opacity","ImageUpload","React","createRef","props","state","imagePreviewUrl","imageShow","inputFile","loading","fileBtn","onImageChange","onSentMessage","_handleImageChange","bind","_handleSubmit","onClose","_handleFile","EventBus","on","console","log","setState","e","preventDefault","this","current","click","reader","FileReader","target","files","formData","FormData","append","onloadend","result","readAsDataURL","imageUploadStarts","FileUpload","then","res","onImageClosed","className","onClick","src","alt","ref","id","type","onChange","Component","padding","baseurl","window","location","protocol","process","imageUrl","image","isBaseImg","isFullImageUrl","btnPrimaryStyle","borderRadius","borderTopLeftRadius","btnDangerStyle","borderTopRightRadius","ht","height","spliceArray","array","obj","i","length","conversationID","splice","messagesEnd","messagesRef","ModInbox","border","overflow","clearCounter","threads","selectedUser","counter","seen","toggle","isOpen","unarchive","conID","chat","unArchiveChat","Notification","message","activeThreads","push","resp","archivedThreads","getMessages","messages","error","archive","archiveChat","msgSeen","counts","seenMessage","dispatch","detail","scrollToBottom","scrollIntoView","behavior","block","selectUser","user","ChatStorage","hasMessages","getMessagesByConversation","setMessages","sendMessage","msg","currentMsg","currentImage","sendToConversation","addNewMessage","handleChange","value","onChildImageChange","schedule","setInterval","getUserThreads","archived","_threads","getAllThreads","key","updateThread","ID","lastMessage","activateThreads","isActive","setTimeout","toggleThreads","onKeywordChange","event","keywords","filtered","undefined","filter","item","userName","toLowerCase","includes","community","name","componentDidMount","paramID","userID","document","body","addEventListener","isLoading","componentWillUnmount","removeEventListener","match","params","JSON","parse","localStorage","getItem","_id","onKeyUp","keyCode","charCode","placeholder","map","thread","index","logo","slice","isMod","href","from","userId","userImage","rel","formatTime","createdAt","onFocus","onFocusCapture","xmlns","viewBox","transform","fill","d","float","clear"],"mappings":"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","file":"static/js/18.dd2c6f9b.chunk.js","sourcesContent":["import axiosService from \"../../axiosService\"\n\nconst Post = {\n    uploadFile: (data: FormData) => axiosService.post(`media/upload`, data),\n    deleteFile: (file: string) => axiosService.delete(`media/upload`, {data: {file: file}})\n}\n\nexport default Post","import { REG_EXP_URL } from \"../../Constants/constants\"\n\nexport const isURL = (url: string) => {\n    return REG_EXP_URL.test(url)\n}\n","import React, { Component } from 'react';\nimport FileUpload from '../../Helpers/Request/Services/uploadFile/FileUpload';\nimport EventBus from '../../Helpers/Request/Services/event-bus';\n\nconst style = {\n    width: \"60px\",\n    opacity: .4\n}\nconst fileBtn = React.createRef<HTMLInputElement>();\n// const onImageChange = () => {}\nclass ImageUpload extends Component<any, any> {\n    constructor(props: any) {\n      super(props);\n      this.state = {\n        file: '',\n        imagePreviewUrl: '',\n        imageShow: false,\n        inputFile: {},\n        loading:false,\n        fileBtn: {},\n        onImageChange: ()=>{}\n      };\n\n      this.onSentMessage = this.props.onSentMessage;\n      this._handleImageChange = this._handleImageChange.bind(this);\n      this._handleSubmit = this._handleSubmit.bind(this);\n      this.onClose = this.onClose.bind(this);\n      this._handleFile = this._handleFile.bind(this);\n      EventBus.on('message-sent', () => {\n        console.log('message recieved in child using even bus');\n        this.setState({imageShow: false});\n        this.setState({imagePreviewUrl: \"\"});\n        this.setState({loading: false});\n      })      \n    }\n  \n    onSentMessage(data: any) {\n      console.log('event recieved inside child component ...');\n    }\n    \n    _handleSubmit(e: any) {\n      e.preventDefault();\n      // TODO: do something with -> this.state.file\n    }\n\n    _handleFile(e: any) {\n      e.preventDefault();\n      this.state.fileBtn.current?.click();\n      console.log(this.state.fileBtn);\n    }\n  \n    _handleImageChange(e: any) {\n    //   e.preventDefault();\n  \n      let reader = new FileReader();\n      this.setState({inputFile: e.target});\n      this.setState({loading: true})\n      let file = e.target.files[0];\n      let formData = new FormData();\n      formData.append('images', file);\n      \n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result,\n          imageShow: true\n        });\n      }\n  \n      reader.readAsDataURL(file)\n      this.props.imageUploadStarts();\n      FileUpload.uploadFile(formData)\n      .then(res => {\n          console.log(res.data);\n          this.props.onImageChange(res.data.data);\n          this.setState({loading: false});\n      })\n    }\n  \n    onClose() {\n      this.setState({inputFile: null});\n      this.setState({imagePreviewUrl: \"\"});\n      this.setState({imageShow: false});\n      this.setState({loading: false});\n      this.props.onImageClosed(\"\");\n    }\n    render() {\n    //   let imagePreviewUrl = this.state.imagePreviewUrl;\n    //   let $imagePreview = null;\n    //   if (this.state.imagePreviewUrl) {\n    //     $imagePreview = (<img src={imagePreviewUrl} />);\n    //   }\n  \n      return (\n        <div className=\"image--uploader--container flex\">\n          {!this.state.imageShow ? \"\" : <div className=\"full--width\"> <i onClick={this.onClose} className=\"fa image--uploader--close fa-times-circle-o text-danger\"></i> </div>}\n          {this.state.loading ? <div className=\"image--uploader--loading\">\n                                    <i className=\"centered fa fa-spinner fa-pulse\"></i>\n                                    </div> \n                              : \"\"}\n          {this.state.imagePreviewUrl ? <img style={style} src={this.state.imagePreviewUrl} alt=\"\"/> : \"\"}\n          {\n            !this.state.imageShow ?   \n              (\n                <>\n                  {/* <button className=\"btn btn-default\"> */}\n                    <i  onClick={this._handleFile} className=\"fa fa-picture-o lg-fonts\"></i>\n                    {/* </button> */}\n                  <input ref={this.state.fileBtn} id=\"image--uploader--button\" className=\"class--hidden\" type=\"file\" onChange={this._handleImageChange} />\n                </>\n              )\n              : \"\"\n            }\n        </div>\n      )\n    }\n  }\n\n  export default ImageUpload","\nimport React, { useState, useEffect } from \"react\"\nimport Notification from '../../Shared/Notification/Notification';\n\nimport { useParams } from \"react-router-dom\"\n\nimport { DefaultContent } from \"../../Controller/Main/ContentWithCommunities\"\n\nimport { chat } from \"../../Helpers/Request/Services/chat/chat\"\nimport { formatTime } from \"../../Helpers/Date/time\"\nimport isBaseImg from \"../../Helpers/Functions/isBaseImg\"\nimport isFullImageUrl from \"../../Helpers/Functions/isFullImageUrl\"\nimport EventBus from \"../../Helpers/Request/Services/event-bus\"\nimport { isURL } from \"../../Helpers/RegularExpressions/isUrl\"\nimport { userId } from \"../../Constants/getUserId\"\nimport ImageUpload from \"../../Shared/ImageUploader\"\nimport ChatStorage from '../../Helpers/chatstorage';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport {faSpinner, faPlus} from '@fortawesome/free-solid-svg-icons'\nconst padding = {\n    'padding': '0 2px'\n}\n\nconst baseurl = `${window.location.protocol}//${process.env.REACT_APP_API_URL}/`\ntype state = {\n    selectedUser: any\n    messages: []\n    currentMsg: any\n    threads: any[]\n    paramID: any\n    userID: any\n    currentImage: any\n    isOpen: any\n    isActive: any\n    archivedThreads: any[]\n    activeThreads: any[],\n    loading: boolean,\n    keywords: string\n}\ntype routeparam = {\n    id: any\n}\n\nconst imageUrl = (image: string) => {\n    if (isBaseImg(image)) {\n        return image\n    }\n\n    if (isFullImageUrl(image)) {\n        return image\n    }\n\n    return baseurl + image\n}\nconst btnPrimaryStyle = {\n    width: \"50%\",\n    borderRadius: '0px',\n    borderTopLeftRadius: '10px'\n}\nconst btnDangerStyle = {\n    width: \"50%\",\n    borderRadius: '0px',\n    borderTopRightRadius: '10px'\n}\n\nconst ht = {\n    height: \"68px\",\n}\n\nconst spliceArray = (array: any[], obj: any) => {\n    for (let i = 0; i < array.length; i++) {\n        if (array[i].conversationID == obj.conversationID) {\n            array.splice(i, 1)\n            break\n        }\n    }\n\n    return array\n}\n\nconst messagesEnd = React.createRef<any>()\nconst messagesRef = React.createRef<any>()\nclass ModInbox extends React.Component<any, state, routeparam> {\n    constructor(props: any) {\n        super(props)\n\n        this.state = {\n            selectedUser: {},\n            messages: [],\n            currentMsg: \"\",\n            threads: [],\n            archivedThreads: [],\n            activeThreads: [],\n            paramID: this.props.match.params.id,\n            currentImage: \"\",\n            userID: JSON.parse(localStorage.getItem(\"STORAGE_USER_PROFILE\") || \"{}\")._id || \"\",\n            isActive: true,\n            isOpen: false,\n            loading: false,\n            keywords: \"\"\n        }\n\n        // this.state.selectedUser = this.state.users[0];\n        // this.setState({selectedUser: this.state.users[0]})\n        this.selectUser = this.selectUser.bind(this)\n        this.handleChange = this.handleChange.bind(this)\n        this.sendMessage = this.sendMessage.bind(this)\n        this.onChildImageChange = this.onChildImageChange.bind(this)\n        this.onImageClosed = this.onImageClosed.bind(this)\n        this.onKeyUp = this.onKeyUp.bind(this)\n        this.toggle = this.toggle.bind(this)\n        this.activateThreads = this.activateThreads.bind(this)\n        this.archive = this.archive.bind(this)\n        this.unarchive = this.unarchive.bind(this)\n        this.clearCounter = this.clearCounter.bind(this)\n        this.onKeywordChange = this.onKeywordChange.bind(this);\n    }\n\n    style = {\n        height: \"350px\",\n        border: \"1px solid gray\",\n        padding: \"10px\",\n        overflow: \"auto\",\n    }\n\n    clearCounter =() => {\n        let threads = this.state.threads;\n        for(let i=0; i<threads.length; i++) {\n            if(threads[i].conversationID === this.state.selectedUser.conversationID) {\n                threads[i].counter = 0;\n                threads[i].seen = true;\n                break;\n            }\n        }\n        this.setState({threads: threads});\n    }\n\n    toggle = () => {\n        console.log(\"toggleing ...\")\n        this.setState({ isOpen: !this.state.isOpen })\n    }\n\n    unarchive = (conID: string) => {\n        chat.unArchiveChat(conID).then(\n            res => {\n                Notification(res.data.message?res.data.message : \"Conversation Unarchived successfully\", \"success\");\n                this.state.activeThreads.push(this.state.selectedUser)\n                let resp = spliceArray(this.state.archivedThreads, this.state.selectedUser)\n                this.setState({ archivedThreads: resp })\n                this.setState({\n                    selectedUser: this.state.archivedThreads[0] || {},\n                    threads: this.state.archivedThreads,\n                })\n                if (!this.state.selectedUser.conversationID) {\n                    this.setState({ messages: [] })\n                } else {\n                    this.getMessages(this.state.selectedUser.conversationID)\n                }\n            },\n            error => console.log(error.message)\n        )\n    }\n\n    archive = (conID: string) => {\n        chat.archiveChat(conID).then(\n            res => {\n                // TODO add toaster\n                Notification(res.data.message ? res.data.message : \"Conversation Archived Successfully\", \"success\")\n                this.state.archivedThreads.push(this.state.selectedUser)\n                let resp = spliceArray(this.state.activeThreads, this.state.selectedUser)\n                this.setState({ activeThreads: resp })\n                this.setState({ selectedUser: this.state.activeThreads[0] || {}, threads: this.state.activeThreads })\n                if (!this.state.selectedUser.conversationID) {\n                    this.setState({ messages: [] })\n                } else {\n                    this.getMessages(this.state.selectedUser.conversationID)\n                }\n                console.log(\"conversation ID \", conID)\n            },\n            error => console.log(error.message)\n        )\n    }\n\n    msgSeen = () => {\n        // call back end api\n        this.state.selectedUser.counts = 0;\n        chat.seenMessage(this.state.selectedUser.conversationID);        \n        EventBus.dispatch(\"msg-seen\", { detail: null })\n    }\n\n    scrollToBottom = () => {\n        messagesEnd.current.scrollIntoView({ behavior: \"smooth\", block: \"end\" })\n    }\n\n    selectUser = (user: any) => {\n        console.log(\"user is selected\", user)\n        this.setState({ selectedUser: user })\n        if(ChatStorage.hasMessages(user.conversationID)) {\n            this.setState({messages: ChatStorage.getMessages(user.conversationID)}, () => {\n                this.scrollToBottom();\n            });\n            \n            return;\n        }\n\n        chat.getMessagesByConversation(user.conversationID).then(res => {\n            console.log(res.data)\n            this.setState({ messages: res.data })\n            ChatStorage.setMessages(user.conversationID, res.data);\n            this.scrollToBottom()\n        })\n    }\n\n    getMessages(id: any) {\n        if (!id || id == \"\") this.setState({ messages: [] });\n\n        if(ChatStorage.hasMessages(id)) {\n            this.setState({messages: ChatStorage.getMessages(id)});\n            this.scrollToBottom();\n            return;\n        }\n\n        chat.getMessagesByConversation(id).then(res => {\n            console.log(res.data)\n            this.setState({ messages: res.data })\n            ChatStorage.setMessages(id, res.data);\n            this.scrollToBottom()\n        })\n    }\n\n    onKeyUp(event: any) {\n        event.preventDefault()\n        if (event.keyCode === 13 || event.charCode === 13) {\n            this.sendMessage(event)\n        }\n    }\n\n    sendMessage = (e: any) => {\n        e.preventDefault()\n        let msg: { message: string; image?: string } = { message: this.state.currentMsg }\n        if (this.state.currentImage) {\n            msg[\"image\"] = this.state.currentImage\n        }\n        chat.sendToConversation(this.state.selectedUser.conversationID, msg).then(\n            res => {\n                console.log(\"message sent \", res.data);\n                ChatStorage.addNewMessage(res.data.data.conversationID, res.data.data);\n                this.setState({messages: ChatStorage.getMessages(res.data.data.conversationID)});\n                this.scrollToBottom()\n                // this.getMessages(this.state.selectedUser.conversationID)\n            },\n            error => console.log(error)\n        )\n        this.setState({ currentMsg: \"\" })\n        this.setState({ currentImage: \"\" })\n        \n        EventBus.dispatch(\"message-sent\", {})\n    }\n\n    handleChange = (e: any) => {\n        this.setState({ currentMsg: e.target.value })\n    }\n\n    onImageClosed = (data: string) => this.setState({ currentImage: data })\n\n    onChildImageChange = (data: any) => {\n        this.setState({ currentImage: data })\n    }\n\n    schedule = () => {\n        const interval = setInterval(() => this.getMessages(this.state.selectedUser.conversationID), 5000)\n    }\n \n    getUserThreads = () => {\n        let threads = [];\n        let archived = [];\n        let _threads = ChatStorage.getAllThreads();\n        console.log(_threads);\n        for(let key in _threads) {\n            threads.push(..._threads[key].data);\n            archived.push(..._threads[key].archived);\n        }\n        console.log('threads', threads);\n        console.log('archived', archived);\n\n        this.setState({threads: threads});\n        this.setState({activeThreads: threads});\n        this.setState({ archivedThreads: archived })\n        this.setState({ selectedUser: threads[0] || {} })\n        this.getMessages(threads[0].conversationID || \"\");\n\n        /*if(!ChatStorage.hasThread('user')) {\n            chat.getAllThreads().then(\n                res => {\n                    let threads = res.data.data;\n                    \n                    threads.forEach((thread :any)=> {thread.counter = 0; thread.seen = true});\n                    // this.setState({ threads: res.data.data })\n                    this.setState({ threads: threads })\n                    this.setState({ activeThreads: res.data.data })\n                    this.setState({ archivedThreads: res.data.archived })\n                    this.setState({ selectedUser: res.data.data[0] || {} })\n                    \n                    this.getMessages(res.data?.data[0]?.conversationID || \"\")\n                    console.log(threads);\n                },\n                error => console.log(\"error\", error)\n            )\n        } else {\n            let active_threads = ChatStorage.getThreads('user-threads');\n            let archive_threads = ChatStorage.getThreads('user-threads');\n                    \n            active_threads.forEach((thread :any)=> {thread.counter = 0; thread.seen = true});\n            // this.setState({ threads: res.data.data })\n            this.setState({ threads: active_threads })\n            this.setState({ activeThreads: active_threads })\n            this.setState({ archivedThreads: archive_threads })\n            this.setState({ selectedUser: active_threads[0] || {} })\n            \n            this.getMessages(active_threads[0]?.conversationID || \"\")\n            console.log(active_threads);\n        }*/\n    }\n\n    updateThread = (ID: string, msg?: any) => {\n        console.log(msg);\n        let threads = this.state.threads\n        for (let i = 0; i < threads.length; i++) {\n            if (threads[i].conversationID == ID) {\n                threads[i].seen = false;\n                threads[i].counts += 1;\n                                \n                threads[i].lastMessage = msg.message;\n                ChatStorage.addNewMessage(ID, msg);\n                break\n            }\n        }\n\n        if(this.state.selectedUser.conversationID == ID) {\n            this.setState({messages: ChatStorage.getMessages(ID)});\n            this.scrollToBottom();\n        }\n\n        this.setState({ threads: threads })\n        // this.setState({ selectedUser: threads[0] })\n        // this.getMessages(ID)\n    }\n\n    activateThreads = () => {\n        if (!this.state.isActive) {\n            this.setState({\n                threads: this.state.activeThreads,\n            })\n\n            this.setState({\n                isActive: true,\n            })\n\n            this.setState({\n                selectedUser: this.state.activeThreads[0] || {},\n            })\n\n            setTimeout(() => {\n                if (this.state.selectedUser.conversationID) {\n                    this.getMessages(this.state.selectedUser.conversationID)\n                } else {\n                    this.setState({ messages: [] })\n                }\n            }, 100)\n        }\n    }\n\n    toggleThreads = (e: any) => {\n        // e.preventDefault();\n\n        if (this.state.isActive) {\n            this.setState({ isActive: false })\n            this.setState({ threads: this.state.archivedThreads })\n            {\n                this.setState({ selectedUser: this.state.archivedThreads[0] || {} })\n\n                setTimeout(() => {\n                    if (this.state.selectedUser.conversationID) {\n                        this.getMessages(this.state.selectedUser.conversationID)\n                    } else {\n                        this.setState({ messages: [] })\n                    }\n                }, 0)\n            }\n        }\n    }\n\n    onKeywordChange = (event: any) => {\n        let key = event.target.value;\n        this.setState({keywords: key});\n        let _threads = this.state.threads;\n        let filtered = [];\n        if(key !== undefined || key != null || key != \" \" || key != \"\") {\n            filtered = _threads.filter((item: any) => {\n                return (\n                    item.user?.userName.toLowerCase().includes(key.toLowerCase()) ||\n                    item.community?.name.toLowerCase().includes(key.toLowerCase()) ||\n                    item?.name.toLowerCase().includes(key.toLowerCase())\n                );\n            })\n        }\n\n        this.setState({activeThreads: filtered});\n    }\n\n    componentDidMount = () => {\n        console.log('this is user inbox', this.state.paramID);\n        EventBus.on(\"message-\" + this.state.userID, (data: any) => {\n            console.log('new message', data);\n            this.updateThread(data.detail.conversationID, data.detail);\n        })\n\n        EventBus.on(\"com-message\", (data: any) => {\n            // for this community message\n            this.updateThread(data.detail.conversationID, data.detail)\n        })\n\n        document.body.addEventListener(\"click\", () => {\n            console.log(\"clicked window\")\n            if (this.state.isOpen) {\n                setTimeout(() => {\n                    this.setState({ isOpen: false })\n                }, 200)\n            }\n        })\n        this.setState({loading: true});\n        if(!ChatStorage.isLoading()) {\n            this.getUserThreads()\n            this.setState({loading: false})\n        } else {\n            setTimeout(() => {\n                this.setState({loading: false});\n                this.getUserThreads();\n            }, 7000);\n        }\n        \n    }\n\n    componentWillUnmount = () => {\n        document.body.removeEventListener(\"click\", () => {})\n    }\n\n    render() {\n        \n        return (\n            \n            <DefaultContent>\n                    \n                <div className=\"container\" style={padding}>\n                \n                    <div className=\"row\">\n                    \n                        <div className=\"col-md-4\" style={padding}>\n                            <div className=\"messages--list custom--bg\">\n                                <div className=\"flex\">\n                                    <button\n                                        onClick={this.activateThreads}\n                                        style={btnPrimaryStyle}\n                                        className={`btn btn-outline-primary ${this.state.isActive ? \"active\" : \"\"}`}\n                                    >\n                                        Active\n                                    </button>\n                                    <button\n                                        onClick={this.toggleThreads}\n                                        style={btnDangerStyle}\n                                        className={`btn btn-outline-danger ${!this.state.isActive ? \"active\" : \"\"}`}\n                                    >\n                                        Archived\n                                    </button>\n                                </div>\n                                <input type=\"text\" placeholder=\"search\" onChange={this.onKeywordChange} value={this.state.keywords} className=\"form-control\"/>\n\n                                {this.state.activeThreads.map((thread, index) => {\n                                    return (\n                                        <div\n                                            onClick={() => this.selectUser(thread)}\n                                            className={`sidebar--item ${\n                                                thread.conversationID == this.state.selectedUser.conversationID\n                                                    ? \"active\"\n                                                    : \"\"\n                                            }`}\n                                        >\n                                            <div className=\"d-flex align-items-center\">\n                                                <img className=\"user--img\" src={imageUrl(thread.logo)} alt={\"\"} />\n                                                <p className={thread.counts > 0 ? \"text--bold\" : \"\"}>\n                                                    {thread.name} {thread.counts > 0 ? <span className=\"badge badge-primary pull-right\">{thread.counts}</span> : \"\"}\n                                                </p>\n                                            </div>\n                                            <p className=\"last--message\">\n                                                {thread.lastMessage\n                                                    ? thread.lastMessage.slice(0, 6) +\n                                                      (thread.lastMessage.length > 10 ? \"...\" : \"\")\n                                                    : \"No Message\"}\n                                                {/* <small className=\"float-right\">{user.lastTime ? formattedTime(user.lastTime) : \"\"}</small> */}\n                                            </p>\n                                        </div>\n                                    )\n                                    // <li key={ index }  onClick={() => this.selectUser(thread)}> {thread.name}</li>;\n                                })}\n                            </div>\n                        </div>\n                        <div className=\"col-md-8\" style={padding}>\n                        {\n                            this.state.loading && (\n                                <div className={\"d-flex pos\"}>\n                                    <div className=\"mr-auto ml-auto\">\n                                        <span className=\"custom--badge badge-success\">Loading ...</span>\n                                    </div>\n                                </div>\n                            )\n                        }\n                            <div className=\"custom--bg message--details\">\n                                <div className=\"d-flex justify-content-between border-bottom mb-2 pb-2\">\n                                    <div className=\"message--header d-flex align-items-center\">\n                                        <img\n                                            className=\"user--img\"\n                                            src={\n                                                this.state.selectedUser?.logo\n                                                    ? imageUrl(this.state.selectedUser.logo)\n                                                    : \"\"\n                                            }\n                                        />\n                                        <p className=\"user--name mb-0 ml-1\">\n                                            {\n                                                this.state.selectedUser.isMod \n                                                ? <a href={`/community/details/${this.state.selectedUser._id || this.state.paramID}`}><strong>{this.state.selectedUser?.name}</strong></a>\n                                                : <strong>{this.state.selectedUser?.name}</strong>\n                                            }\n                                            \n                                        </p>\n                                        {!this.state.selectedUser.name ? (\n                                            <p className=\"user--name mb-0 ml-1\">\n                                                <strong>No Threads Available</strong>\n                                            </p>\n                                        ) : (\n                                            \"\"\n                                        )}\n                                    </div>\n                                    <div className=\"dots\" onClick={this.toggle}>\n                                        <div className=\"dots\">\n                                            <div className=\"dot\"></div>\n                                            <div className=\"dot\"></div>\n                                            <div className=\"dot\"></div>\n                                        </div>\n                                        {this.state.isOpen && this.state.selectedUser.conversationID ? (\n                                            <div className=\"dropdown--archive\">\n                                                {this.state.isActive ? (\n                                                    <span\n                                                        onClick={() =>\n                                                            this.archive(this.state.selectedUser.conversationID)\n                                                        }\n                                                    >\n                                                        Archive\n                                                    </span>\n                                                ) : (\n                                                    <span\n                                                        onClick={() =>\n                                                            this.unarchive(this.state.selectedUser.conversationID)\n                                                        }\n                                                    >\n                                                        unarchive\n                                                    </span>\n                                                )}\n                                            </div>\n                                        ) : (\n                                            \"\"\n                                        )}\n                                    </div>\n                                </div>\n                                \n                                <div className=\"overflow\" ref={messagesRef}>\n                             \n                                    {!this.state.messages.length\n                                        ? \"No Message Found\"\n                                        : this.state?.messages?.map((message: any, index: any) => {\n                                              return (\n                                                  <div\n                                                      className={`message--item-container d-flex ${\n                                                          !message.from ? \"welcome-message\" : \"\"\n                                                      }  ${userId == message.from?._id ? \"received\" : \"\"}`}\n                                                  >\n                                                      <div className=\"message--item d-flex flex-nowrap \">\n                                                          {!message.from ? (\n                                                              \"\"\n                                                          ) : (\n                                                              <img\n                                                                  src={\n                                                                      message.from?.userImage\n                                                                          ? imageUrl(message?.from?.userImage)\n                                                                          : \"\"\n                                                                  }\n                                                                  alt=\"\"\n                                                                  className=\"user--img\"\n                                                              />\n                                                          )}\n                                                          <div className=\"message wordwrap\">\n                                                              <p className={`${!message.from ? \"welcome\" : \"text\"}`}>\n                                                                  {isURL(message.message) ? (\n                                                                      <a\n                                                                          href={message.message}\n                                                                          className={\"message-link\"}\n                                                                          target={\"_blank\"}\n                                                                          rel={\"noopener noreferrer\"}\n                                                                      >\n                                                                          {message.message}\n                                                                      </a>\n                                                                  ) : (\n                                                                      message.message\n                                                                  )}\n\n                                                                  {!message.image ? (\n                                                                      \"\"\n                                                                  ) : (\n                                                                      <img\n                                                                          className=\"message--img\"\n                                                                          src={baseurl + message.image}\n                                                                      />\n                                                                  )}\n                                                              </p>\n                                                              {message.seen && (\n                                                                  <small className=\"text-muted\">&#10003; seen</small>\n                                                              )}\n                                                              <span className=\"time\">\n                                                                  {formatTime(message.createdAt)}\n                                                              </span>\n                                                          </div>\n                                                      </div>\n                                                  </div>\n                                              )\n                                          })}\n                                    <form>\n                                        <div className=\"message--input\">\n                                            <div className=\"flex\">\n                                                <ImageUpload\n                                                    onImageClosed={this.onImageClosed}\n                                                    onSentMessage={this.sendMessage}\n                                                    onImageChange={this.onChildImageChange}\n                                                    imageUploadStarts={() => {}}\n                                                />\n                                                <textarea\n                                                    style={ht}\n                                                    onKeyUp={this.onKeyUp}\n                                                    name=\"message\"\n                                                    className=\"form-control h-40\"\n                                                    onFocus={this.msgSeen}\n                                                    value={this.state.currentMsg}\n                                                    onChange={this.handleChange}\n                                                    onFocusCapture={this.clearCounter}\n                                                ></textarea>\n                                                <button className=\"btn send--btn\" onClick={this.sendMessage}>\n                                                    <svg\n                                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                                        width=\"39.881\"\n                                                        height=\"34.183\"\n                                                        viewBox=\"0 0 39.881 34.183\"\n                                                    >\n                                                        <g transform=\"translate(0 0)\">\n                                                            <g transform=\"translate(0 0)\">\n                                                                <path\n                                                                    fill=\"#243c4b\"\n                                                                    d=\"M.019,32,0,45.294l28.486,3.8L0,52.89.019,66.183,39.881,49.092Z\"\n                                                                    transform=\"translate(0 -32)\"\n                                                                />\n                                                            </g>\n                                                        </g>\n                                                    </svg>\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </form>\n\n                                    <div style={{ float: \"left\", clear: \"both\" }} ref={messagesEnd}></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </DefaultContent>\n        )\n    }\n}\n\nexport default ModInbox;\n"],"sourceRoot":""}