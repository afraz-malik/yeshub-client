(this.webpackJsonpyeshub=this.webpackJsonpyeshub||[]).push([[16],{376:function(e,t,a){"use strict";var n=a(2),l=a(0),o=a.n(l),c=a(63),m=a(45);t.a=function(e){var t=e.onChange,a=e.postId,s=e.data,i=e.submitUrl,r=e.isCommentAllowed,d=void 0===r||r,u=e.afterComment,p=Object(l.useState)(s),b=Object(n.a)(p,2),v=b[0],f=b[1];Object(l.useEffect)((function(){f(s)}),[s]);return d?o.a.createElement("div",{className:"mc-border p-2 mt-4"},o.a.createElement("div",{className:"cp-form p-0"},o.a.createElement("div",{className:"form-group mb-0"},o.a.createElement(c.a,{validate:!0,className:"d-flex align-items-center comment__form",submitUrl:i,data:{body:s,postId:a},buttonText:"Comment",formId:"comment",afterSubmit:function(e){console.log("comment success",e),u&&u(e.body)},submitBtnWrapperClass:"",props:{submitButtonClass:"btn btn-signup comment__btn"}},o.a.createElement(m.a,{className:"form-control form-input2",inputWrapperClass:"form-group comment__input",onChange:t,name:"body",props:{rows:"2",placeholder:"Write your comment..",value:v}}))))):null}},378:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(){return l.a.createElement("div",{className:"alert alert-warning text-center mt-2"},"Sign in to join")}},392:function(e,t,a){"use strict";var n=a(21),l=a(2),o=a(0),c=a.n(o),m=a(22),s=a(5),i=a(349),r=a(350),d=a(11),u=a(68),p=a(4),b=a(12),v=a(115),f=a(6),E=function(e){var t,a,n,l,c=e.comment;return o.createElement("div",{className:"post-header d-flex justify-content-between"},o.createElement("div",{className:"post-head-detail d-flex"},o.createElement(p.b,{to:"".concat(c.userId?"/profile/".concat(null===c||void 0===c||null===(t=c.userId)||void 0===t?void 0:t._id):null)},o.createElement("div",{className:"post-detail pl-0 d-flex"},o.createElement("div",{className:"profile-image"},o.createElement("img",{src:c.userId?Object(b.a)(null===(a=c.userId)||void 0===a?void 0:a.userImage):f.t,alt:(null===(n=c.userId)||void 0===n?void 0:n.userName)||"User Removed"})),o.createElement("div",{className:"post-in"},"Reply by :"),o.createElement("div",{className:"post-in  ml-1"}," ",c.userId?null===(l=c.userId)||void 0===l?void 0:l.userName:"User Removed")))),o.createElement("div",{className:"post-time "},o.createElement("div",{className:"post-in"},Object(v.a)(c.createdAt))))},g=a(116),C=a(13),N=a(14),j=a(19),O=function e(t){var a,c=t.comment,p=t.totalReplies,b=void 0===p?0:p,v=t.isCommentAllowed,f=void 0===v||v,O=t.deleteReply,h=t.isMod,w=t.postID,y=(Object(d.i)().id,o.useState(b)),x=Object(l.a)(y,2),_=x[0],k=x[1],I=o.useState(!0),R=Object(l.a)(I,2),S=R[0],M=R[1],A=o.useState(1),L=Object(l.a)(A,2),V=L[0],B=L[1],G=o.useState(!!c.isLiked),D=Object(l.a)(G,2),H=D[0],U=D[1],J=o.useState(c.upVoteCount),W=Object(l.a)(J,2),Z=W[0],F=W[1],T=o.useState(c.children||[]),Y=Object(l.a)(T,2),q=Y[0],z=Y[1],K=o.useState({body:"",commentId:c._id,postId:w}),P=Object(l.a)(K,2),Q=P[0],X=P[1],$=o.useState(!1),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=function(e){g.a.delete(e,h).then((function(){var t=q.filter((function(t){return t._id!==e}));z(t),k(_-1)}))};o.useEffect((function(){g.a.getCommentReplies(c._id,{},V).then((function(e){z([].concat(Object(n.a)(q),Object(n.a)(e.data.data||[]))),M(!0)}))}),[V]);return o.createElement("div",{className:"post-container comment__item"},o.createElement("div",{className:"main-data pt-4"},o.createElement("div",{className:"post-wrap"},o.createElement("div",{className:"post-body"},o.createElement("div",{className:"ps-left"},o.createElement("div",{className:"left-wrapper"},o.createElement(E,{comment:c}),o.createElement("p",{className:"general-text"},c.body),o.createElement("div",{className:"post-footer"},o.createElement("div",{className:"lefts"},o.createElement("div",{className:"post-reply pointer",onClick:function(){g.a.helpful(c._id,H).then((function(){F(H?Z-1:Z+1),U(!H)}))}},o.createElement("span",null,Z),o.createElement("svg",{width:20,height:20,viewBox:"0 0 40 58",className:""},o.createElement("path",{d:"M23.75 0C23.75 0 25.6 7.20581 25.6 13.052C25.6 18.6535 22.225 23.1946 17.075 23.1946C11.9 23.1946 8 18.6535 8 13.052L8.075 12.0731C3.025 18.5992 0 27.0558 0 36.2466C0 48.2654 8.95 58 20 58C31.05 58 40 48.2654 40 36.2466C40 21.5902 33.525 8.51102 23.75 0ZM19.275 49.8425C14.825 49.8425 11.225 46.0356 11.225 41.3043C11.225 36.8992 13.85 33.7993 18.25 32.8204C22.675 31.8415 27.25 29.5302 29.8 25.805C30.775 29.3127 31.275 33.0108 31.275 36.7904C31.275 43.9963 25.9 49.8425 19.275 49.8425Z",fill:"#243C4B",fillOpacity:H?1:.6})),o.createElement("span",{className:"text"},"Helpful",H?"":"?")),o.createElement("div",{className:"post-reply",onClick:function(){return ae(!te)}},o.createElement("span",{className:"icon"},o.createElement("svg",{className:"comment--icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M20.8 1H3.2C1.99 1 1 1.99 1 3.2V23L5.4 18.6H20.8C22.01 18.6 23 17.61 23 16.4V3.2C23 1.99 22.01 1 20.8 1ZM20.8 16.4H5.4L3.2 18.6V3.2H20.8V16.4Z",fill:"#243C4B",stroke:"#243C4B",strokeWidth:"0.5"}))),o.createElement("span",{className:"text"},_?o.createElement("span",{className:"badge badge-lg badge-info"},_):"Reply")),0!==_?o.createElement("span",{className:"replyCount",id:c._id,onClick:function(){return M(!S)}},S?"Hide Replies":"+".concat(_," Replies")):null),o.createElement("div",{className:"rights"},o.createElement(u.a,{type:"comment",id:c._id}),(null===c||void 0===c||null===(a=c.userId)||void 0===a?void 0:a._id)===j.b||h?o.createElement("div",{className:"post-hide pointer",onClick:function(){return O(c._id)}},o.createElement(C.a,{icon:N.t,className:"icon"}),o.createElement("span",{className:"text"},"Delete")):null))))))),te&&f?o.createElement("div",{className:"pl-3"},o.createElement("div",{className:"mc-border p-2 mt-3"},o.createElement(i.a,{className:"align-items-center"},o.createElement(r.a,{className:"flex-1"},o.createElement("input",{name:"body",id:"body",className:"form-control form-input2",type:"text",placeholder:"Comment Reply",onChange:function(e){X(Object(s.a)(Object(s.a)({},Q),{},Object(m.a)({},e.target.name,e.target.value)))},value:Q.body})),o.createElement("div",{style:{width:"130px"}},o.createElement("button",{type:"button",className:"btn btn-md btn-signup",onClick:function(){g.a.addComment(Q).then((function(e){z([].concat(Object(n.a)(q),[e.data.body])),k(_+1),ae(!1)}))}},"Reply"))))):null,S&&o.createElement(o.Fragment,null,q.map((function(t){return o.createElement(e,{isMod:h,deleteReply:ne,isCommentAllowed:f,comment:t,totalReplies:t.repliesCount,key:t._id,postID:w})})),_>q.length?o.createElement("div",{className:"text-center"},o.createElement("button",{onClick:function(){B((function(e){return e+1}))},className:"text-muted btn font-weight-bold show__more-btn"},"Load More")):null))},h=a(393);t.a=function(e){var t=e.comments,a=e.isCommentAllowed,m=e.fetchComments,s=e.hasMoreComments,i=void 0===s||s,r=e.isMod,d=void 0!==r&&r,u=Object(o.useState)(Object(n.a)(t)),p=Object(l.a)(u,2),b=p[0],v=p[1];Object(o.useEffect)((function(){console.log("checking comments ",t),v(t)}),[t]);var f=function(e){g.a.delete(e,d).then((function(){var t=b.filter((function(t){return t._id!==e}));v(t)}))};return c.a.createElement(c.a.Fragment,null,b.map((function(e){return c.a.createElement(h.Fade,{enter:!0,down:!0,delay:300},c.a.createElement(O,{isMod:d,deleteReply:f,isCommentAllowed:a,key:e._id,comment:e,totalReplies:e.repliesCount,postID:e.postId}))})),i?c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{onClick:m,className:"text-muted btn font-weight-bold show__more-btn"},"Load More")):null)}},516:function(e,t,a){"use strict";a.r(t);var n=a(21),l=a(22),o=a(5),c=a(2),m=a(0),s=a.n(m),i=a(11),r=a(4),d=a(378),u=a(48),p=a(82),b=a(32),v=a(376),f=a(392),E=a(6),g=a(24),C=a(116),N=a(12),j=a(73),O=s.a.createRef();t.default=function(){var e,t,a,h,w,y,x=Object(i.i)().id,_=Object(i.h)().state,k=Object(m.useState)(1),I=Object(c.a)(k,2),R=I[0],S=I[1],M=Object(m.useState)({comments:[],totalVotes:0,totalReplies:0}),A=Object(c.a)(M,2),L=A[0],V=A[1],B=Object(m.useState)({postId:x,body:""}),G=Object(c.a)(B,2),D=G[0],H=G[1],U=Object(m.useState)(_||void 0),J=Object(c.a)(U,2),W=J[0],Z=J[1],F=Object(m.useState)(g.a),T=Object(c.a)(F,1)[0],Y=function(e){H(e?Object(o.a)(Object(o.a)({},D),{},Object(l.a)({},e.target.name,e.target.value)):Object(o.a)(Object(o.a)({},D),{},{body:""}))},q=function(){C.a.getTopLevelComments(x||"",{},R).then((function(e){var t=e.data.body,a=t.docs,l=t.upVoteCount,c=t.downVoteCount,m=t.totalDocs;V({comments:[].concat(Object(n.a)(L.comments),Object(n.a)(a)),totalVotes:l-c,totalReplies:m}),H(Object(o.a)(Object(o.a)({},D),{},{body:""}))}))};Object(m.useEffect)((function(){q()}),[R]),Object(m.useEffect)((function(){return document.addEventListener("comment-success",q),function(){return document.removeEventListener("comment-success",q)}}),[]),Object(m.useEffect)((function(){b.a.detailsById(x).then((function(e){Z(e.data.data)}))}),[x]);var z=function(){var e=window.scrollY+130;window.scrollTo(0,e)};return s.a.createElement(u.a,{asideRightContent:s.a.createElement("div",{className:"mc-border mt-5 mt-lg-0 mb-3"},s.a.createElement("div",{className:"group-wrap"},s.a.createElement("div",{className:"grp-header d-flex justify-content-between"},s.a.createElement(r.b,{to:"/community/details/".concat(null===W||void 0===W||null===(e=W.knowledgeGroup)||void 0===e?void 0:e._id)},s.a.createElement("div",{className:"d-flex flex-row align-items-center "},s.a.createElement("div",{className:"image mr-2 profile-image"},s.a.createElement("img",{src:(null===W||void 0===W||null===(t=W.knowledgeGroup)||void 0===t?void 0:t.logo)?Object(N.a)(null===(a=W.knowledgeGroup)||void 0===a?void 0:a.logo):E.p,alt:"profile"})),s.a.createElement("div",{className:"d-flex flex-column"},s.a.createElement("div",{className:"grp-name"},null===W||void 0===W||null===(h=W.knowledgeGroup)||void 0===h?void 0:h.name),s.a.createElement("div",{className:"grp-members"},s.a.createElement("span",null,"Members"),s.a.createElement("span",{className:"ml-2"},(null===W||void 0===W||null===(w=W.knowledgeGroup)||void 0===w?void 0:w.members)||0)))))),s.a.createElement("p",{className:"general-text pt-2 mb-0"},(null===W||void 0===W||null===(y=W.knowledgeGroup)||void 0===y?void 0:y.description)||""),s.a.createElement("div",{className:"form-group mt-3"},T&&s.a.createElement("button",{className:"btn btn-view",onClick:function(){var e,t;return t=(null===W||void 0===W||null===(e=W.knowledgeGroup)||void 0===e?void 0:e._id)||"",void p.a.joinCommunity(t)}},"JOINED")||s.a.createElement(d.a,null))))},W?s.a.createElement(j.b,{totalComments:L.totalReplies,post:W,idx:0,isUser:!0,topMargin:!1,hideAward:!1}):null,s.a.createElement(v.a,{isCommentAllowed:!!(null===W||void 0===W?void 0:W.isJoined),onChange:Y,data:D.body,postId:D.postId,afterComment:function(e){return function(e){Y(),D.body="",H(Object(o.a)({},D)),V(Object(o.a)(Object(o.a)({},D),{},{comments:[e].concat(Object(n.a)(L.comments))})),z()}(e)},submitUrl:"/comment"}),s.a.createElement("div",{ref:O}),s.a.createElement(f.a,{isMod:!!(null===W||void 0===W?void 0:W.isComMod),hasMoreComments:L.totalReplies>L.comments.length,fetchComments:function(){return S(R+1)},isCommentAllowed:!!(null===W||void 0===W?void 0:W.isJoined),comments:L.comments}))}}}]);
//# sourceMappingURL=16.adb54cae.chunk.js.map